import{c as e,h as a,d as s,k as t,o,p as n,q as r,v as c,l as i,a as l,g as d,b as u,u as m,e as w}from"./auth-CQzytyle.js";const y=e(s,"link"),g=a(null),f=a(0),h=async e=>{const a=g.get();if(!a||!t)throw new Error("No file to upload or user is not logged in.");const s=o(n,`uploads/${a.name}`),d=r(s,a);return new Promise(((a,s)=>{d.on("state_changed",(e=>{const a=e.bytesTransferred/e.totalBytes;f.set(1==a?0:a+.1)}),(e=>{console.error("Upload failed:",e),s(e)}),(async()=>{try{const s=await c(d.snapshot.ref);console.log("YOU WILL NEED THESE NEXT! :",i.get()?.email,e.collectionName,e.documentName,e.formFieldName,s);const t=await l(y,e);console.log("Document successfully written with ID:",t.id),a(s)}catch(e){console.error("Failed to get download URL:",e),s(e)}}))}))},p=e(s,"electives"),E=async e=>{console.log("Document successfully written with ID:",e);try{if(!e.name||!e.creationDate||"number"!=typeof e.points)throw new Error("Invalid elective data. Ensure name, dueDate, and points are provided.");e.screenShot="FIX ME";const a=await l(p,e);return console.log("Document successfully written with ID:",a.id),g.set(null),a}catch(e){throw console.error("Error creating elective:",e),new Error(`Failed to create elective: ${e.message}`)}},D=async()=>(await d(p)).docs.map((e=>({id:e.id,...e.data()}))),v=async()=>(await d(p)).docs.map((e=>({id:e.id,name:e.data().name}))),I=async(e,a)=>{const s=u(p,e);return await m(s,a)},N=async e=>{const a=u(p,e);return await w(a)};export{D as a,f as b,E as c,I as d,N as e,g as f,v as g,h as u};
