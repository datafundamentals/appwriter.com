import{d as e,m as a,f as s,i as t,o,p as n,q as r,v as c,u as i,g as l,h as d,j as u,k as m,l as w}from"./auth-4w4T72xN.js";const g=e(s,"link"),y=a(null),f=a(""),h=a(0),p=async e=>{const a=y.get();if(!a||!t)throw new Error("No file to upload or user is not logged in.");const s=o(n,`uploads/${a.name}`),d=r(s,a);return new Promise(((a,s)=>{d.on("state_changed",(e=>{const a=e.bytesTransferred/e.totalBytes;h.set(1==a?0:a+.1)}),(e=>{console.error("Upload failed:",e),s(e)}),(async()=>{try{const s=await c(d.snapshot.ref);f.set(s),console.log("YOU WILL NEED THESE NEXT! :",i.get()?.email,e.collectionName,e.documentName,e.formFieldName,s);const t=await l(g,e);console.log("Document successfully written with ID:",t.id),a(s)}catch(e){console.error("Failed to get download URL:",e),s(e)}}))}))},E=e(s,"electives"),D=async e=>{console.log("Document successfully written with ID:",e);try{if(!e.name||!e.creationDate||"number"!=typeof e.points)throw new Error("Invalid elective data. Ensure name, dueDate, and points are provided.");e.screenShot=""+f.get();const a=await l(E,e);return console.log("Document successfully written with ID:",a.id),f.set(""),y.set(null),a}catch(e){throw console.error("Error creating elective:",e),new Error(`Failed to create elective: ${e.message}`)}},v=async()=>(await d(E)).docs.map((e=>({id:e.id,...e.data()}))),N=async()=>(await d(E)).docs.map((e=>({id:e.id,name:e.data().name}))),I=async(e,a)=>{const s=u(E,e);return await m(s,a)},b=async e=>{const a=u(E,e);return await w(a)};export{p as a,h as b,D as c,I as d,b as e,y as f,v as g,N as h,f as u};
