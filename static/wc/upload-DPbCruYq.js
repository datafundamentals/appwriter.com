import{c as s,h as o,d as a,k as t,o as e,p as n,q as r,v as l,a as c}from"./auth-5Jcf1-eo.js";const i=s(a,"link"),d=o(null),u=o(0),f=async s=>{const o=d.get();if(!o||!t)throw new Error("No file to upload or user is not logged in.");const a=e(n,`uploads/${o.name}`),f=r(a,o);return new Promise(((o,a)=>{f.on("state_changed",(s=>{const o=s.bytesTransferred/s.totalBytes;u.set(1==o?0:o+.1)}),(s=>{console.error("Upload failed:",s),a(s)}),(async()=>{try{const a=await l(f.snapshot.ref),t=await c(i,s);console.log("Document successfully written with ID:",t.id),o(a)}catch(s){console.error("Failed to get download URL:",s),a(s)}}))}))};export{u as a,d as f,f as u};
